# Sprint_5
# Автотесты для Stellar Burgers (Selenium + pytest)

Проект содержит UI-тесты для проверки функциональности веб-приложения "Stellar Burgers".

## Структура проекта
├── conftest.py # Фикстуры pytest (инициализация драйвера)
├── locators.py # Локаторы элементов (CSS/XPath)
├── data.py # Валидные данные пользователя
├── helper.py # Генераторы тестовых данных
├── curl.py # URL-адреса приложения
└── tests/ # Директория с тестами

Конфигурация
Требования
Python 3.10+

Доступ к тестовому серверу: https://stellarburgers.nomoreparties.site

Поддерживаемые браузеры
Chrome (по умолчанию)

### Файл `tests/test_registration.py`

**Назначение:**  
Тестирование функционала регистрации пользователя, включая позитивные и негативные сценарии.

#### Тест-кейсы:

1. **Успешная регистрация (`test_success_registration`)**  
   - Генерирует валидные данные: `generate_registration_data()`
   - Проверяет успешную регистрацию (при успешной регистрации появляется возможность оформить заказ).
2. **Регистрация с пустым именем (`test_cannot_register_with_empty_name`)** 
   - Проверяет, что регистрация с пустым именем не возможна.
3. **Email без точки в домене (`test_cannot_register_with_an_email_without_a_dot`)**  
   - Генерирует email без точки: `generate_registration_data_without_a_dot_in_an_email()`
   - Проверяет:
     - Блокировка регистрации 
4. **Email без символа @ (`test_cannot_register_with_an_invalid_email_missing_at`)**  
   - Генерирует некорректный email: `generate_registration_data_with_invalid_email_missing_at()`
   - Проверяет:
     - Система не принимает форму
     - URL остается неизменным    
5. **Короткий пароль (<6 символов) (`test_cannot_register_with_an_invalid_password`)**  
   - Генерирует невалидный пароль: `generate_registration_data_with_an_invalid_password()`
   - Проверяет:
     - Отображение ошибки "Некорректный пароль"
     - Сообщение выводится через элемент `ERROR_INPUT`

6. **Пустой пароль (`test_cannot_register_with_empty_password`)**  
   - Оставляет поле пароля пустым
   - Проверяет:
     - Блокировка отправки формы
     - Сохранение текущего URL

#### Особенности реализации:
- **Генерация данных:** Используются 4 типа тестовых данных из `helper.py`
- **Ожидания:** Все действия обернуты в `WebDriverWait` с явными ожиданиями
- **Локаторы:** Все элементы страницы получаются через селекторы из `locators.py`
- **Проверки:** Комбинация ассертов:
  - Сравнение текстовых значений (`text == 'Оформить заказ'`)
  - Валидация URL (`assert driver.current_url`)
  - Проверка видимости элементов (`EC.visibility_of_element_located`)

#### Связь с другими модулями:
- `helper.py` - генерация тестовых данных
- `locators.py` - селекторы элементов интерфейса
- `conftest.py` - управление браузером через фикстуру `driver`

### Файл `tests/test_account_login.py`

**Назначение:**  
Тестирование различных сценариев авторизации зарегистрированного пользователя.

#### Тест-кейсы:

1. **Успешный вход через кнопку "Войти в аккаунт" (`test_successful_login_via_main_page_login_button`)**  
   - Авторизация через главную страницу
   - Проверка:
     - Появление кнопки "Оформить заказ" после входа

2. **Успешный вход через кнопку "Личный кабинет" (`test_successful_login_via_personal_account_button`)**  
   - Авторизация через раздел профиля
   - Проверка:
     - - Появление кнопки "Оформить заказ" после входа

3. **Вход через ссылку в форме регистрации (`test_checking_account_login_via_the_registration_form`)**  
   - Переход со страницы регистрации на авторизацию
   - Проверка:
     - Корректный редирект после ввода данных

4. **Вход через ссылку в форме восстановления пароля (`test_login_via_password_recovery_form_auth_link`)**  
   - Переход со страницы восстановления пароля

#### Особенности реализации:
- **Данные для входа:** Используются валидные учетные данные из `data.py` (email + пароль)
- **Локаторы:** Все элементы интерфейса получаются через селекторы из `locators.py`
- **Ожидания:** Явные ожидания загрузки элементов через `WebDriverWait`
- **Универсальная проверка:** Во всех тестах подтверждением успешного входа служит:
  - Отображение кнопки "Оформить заказ" (`ORDER_BUTTON`)
  - Проверка текста кнопки: `assert text == 'Оформить заказ'`

#### Связь с другими модулями:
- `locators.py` - локаторы элементов интерфейса
- `data.py` - учетные данные тестового пользователя
- `conftest.py` - управление сессией браузера через фикстуру `driver`

**Важно:** Все тесты предполагают, что тестовый пользователь заранее зарегистрирован в системе.

### Файл `test_transfer_personal_account.py`

**Назначение:**  
Тестирование функционала перехода в личный кабинет
**Переход в личный кабинет после авторизации (`test_click_personal_cabinet_redirects_to_account_page`)**  
1. Начальный переход в личный кабинет (без авторизации)
2. Авторизация с валидными данными из `data.py`
3. Повторный переход в личный кабинет
4. Проверка:
   - Загрузка страницы профиля
#### Особенности реализации:
- **Авторизация:** Используются фиксированные учетные данные из `data.py`
- **Ожидания:** 
  - `WebDriverWait` для гарантированной загрузки элементов
  - Проверка видимости кнопки ЛК после авторизации
- **Верификация:** 
  - Проверка атрибута `value` поля ввода логина
  - Подразумевается сравнение с тестовыми данными (в текущей реализации требуется дополнение ассертом)

#### Что проверяет:
- Корректность редиректа на страницу входа при попытке доступа к ЛК без авторизации
- Работоспособность перехода в ЛК после успешного входа
- Отображение персональных данных пользователя в профиле

#### Связь с другими модулями:
- `locators.py` - локаторы элементов:
  - `ACCOUNT_BUTTON` 
  - `LOGIN_INPUT`
  - `SUBMIT_BUTTON` и др.
- `data.py` - логин/пароль тестового пользователя
- `conftest.py` - управление сессией браузера

### Файл `tests/test_switch_account_to_constructor.py`

**Назначение:**  
Тестирование навигации между личным кабинетом и конструктором через два сценария: клик по кнопке конструктора и логотипу.

---

#### Тест-кейсы:

1. **Переход из личного кабинета в конструктор через кнопку (`TestAccountToConstructorNavigation`)**  
   - Авторизация пользователя
   - Переход в личный кабинет
   - Клик на кнопку "Конструктор"
   - Проверка:
     - Отображение заголовка "Соберите бургер" (`HEADING`)
     - 
2. **Переход из личного кабинета в конструктор через логотип (`TestStellarBurgersLogoRedirect`)**  
   - Авторизация пользователя
   - Переход в личный кабинет
   - Клик на логотип "Stellar Burgers"
   - Проверка:
     - Заголовок "Соберите бургер" подтверждает успешный редирект

---

#### Особенности реализации:
- **Авторизация:** Используются фиксированные данные из `data.py`:
  ```python
  Credentials.email
  Credentials.password
  
### Файл `tests/test_logout_functionality.py`

**Назначение:**  
Тестирование функционала выхода пользователя из аккаунта.

#### Тест-кейс:
**Успешный выход из аккаунта (`test_user_can_logout_successfully`)**  
1. Авторизация пользователя с валидными данными
2. Переход в личный кабинет
3. Выход через кнопку "Выход"
4. Проверка:
   - Редирект на страницу входа (`/login`)
   - Наличие элемента `SUBMIT_BUTTON` (кнопка "Войти")

#### Особенности реализации:
- **Локаторы:**
  - `ACCOUNT_BUTTON` — кнопка личного кабинета
  - `EXIT_BUTTON` — кнопка выхода
  - `SUBMIT_BUTTON` — кнопка подтверждения входа
- **Ожидания:**  
  Явные ожидания для всех ключевых действий:
  ```python
  WebDriverWait(driver, 15).until(EC.visibility_of_element_located(...))
  ### Файл `tests/test_navigating_sections_constructor.py`

**Назначение:**  
Тестирование навигации между разделами конструктора бургеров: «Булки», «Соусы», «Начинки».

---

#### Тест-кейсы:

1. **Переход в раздел "Начинки" (`test_switch_between_sections_filling`)**  
   - Клик на раздел "Начинки"  
   - Проверка:  
     - Отображение заголовка "Начинки" (`FILLING_HEADER`)

2. **Переход в раздел "Соусы" (`test_switch_between_sections_sauces`)**  
   - Клик на раздел "Соусы"  
   - Проверка:  
     - Наличие заголовка "Соусы" (`SAUCES_HEADER`)
  3. **Комплексная проверка переключения разделов (`test_switch_between_sections_buns`)**  
   - Последовательные переходы:  
     1. Соусы → Проверка заголовка  
     2. Начинки → Проверка заголовка  
     3. Возврат в Булки  
   - Проверка:  
     - Корректное отображение раздела "Булки" (`BUNS_HEADER`)

---

#### Особенности реализации:
- **Локаторы разделов:**
  - `BUNS_SECTION` – раздел "Булки"  
  - `SAUCES_SECTION` – раздел "Соусы"  
  - `FILLING_SECTION` – раздел "Начинки"
- **Локаторы заголовков:**
  - `BUNS_HEADER`, `SAUCES_HEADER`, `FILLING_HEADER`
- **Ожидания:**  
  Все действия используют явные ожидания для стабильности тестов:
  ```python
  WebDriverWait(driver, 15).until(EC.visibility_of_element_located(...))   